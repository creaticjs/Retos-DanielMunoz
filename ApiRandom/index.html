<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Formulario</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" />
    <script src="main.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

</head>

<body>
    <div id="particles-js"> </div>
    <script type="text/javascript" src="particles.js"> </script>
    <script type="text/javascript" src="app.js"> </script>

    <div class="container">
        <div class="py-5 text-center">
            <h2 class="text-warning">Formulario de registro</h2>
            <p class="text-light">Formulario de registro online.</p>
        </div>

        <div class="row">
            <div class="col-md-4 order-md-2 mb-4">

                <ul class="list-group mb-3">
                    <li class="list-group-item d-flex justify-content-between lh-condensed">
                        <div>
                            <button class="btn btn-primary btn-lg" onclick="traer()">Llenar automaticamente</button>
                        </div>

                    </li>
                    <li class="list-group-item d-flex justify-content-between lh-condensed">
                        <div>
                            <button class="btn btn-primary btn-lg" onclick="limpiar()">Limpiar información</button>
                        </div>

                    </li>
                    <li class="list-group-item d-flex justify-content-between lh-condensed">
                        <img class="img-fluid rounder-circle" id="avatar" src="" width="100px" />
                    </li>

                </ul>

            </div>
            <div class="col-md-8 order-md-1">
                <h4 class="mb-3 text-warning">INFORMACIÓN</h4>
                <form class="needs-validation" novalidate>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="text-light" for="firstName">Primer nombre</label>
                            <input type="text" class="form-control" id="fname" placeholder="Primer nombre" value="">

                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="text-light" for="lastName">Apellido</label>
                            <input type="text" class="form-control" id="lname" placeholder="Apellido" value="">

                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="text-light" for="username">Nombre de Usuario</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">@</span>
                            </div>
                            <input type="text" class="form-control" id="uname" placeholder="Username">

                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="text-light" for="email">Correo Electrónico</label>
                        <input type="email" class="form-control" id="uemail" placeholder="email@ejemplo.com">

                    </div>

                    <div class="mb-3">
                        <label class="text-light" for="telefono">Teléfono</label>
                        <input type="text" class="form-control" id="utelefono" placeholder="">

                    </div>



                    <h4 class="mb-3 text-warning">Tarjeta de credito</h4>

                    <div class="d-block my-3">
                        <div class="custom-control custom-radio">
                            <input id="credit" name="paymentMethod" type="radio" class="custom-control-input" checked
                                required>
                            <label class="custom-control-label text-warning" for="credit">Credit card</label>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="text-light" for="cc-name">Name on card</label>
                            <input type="text" class="form-control" id="cc-name" placeholder="" required>
                            <small class="text-muted">Full name as displayed on card</small>
                            <div class="invalid-feedback">
                                Name on card is required
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="text-light" for="cc-number">Credit card number</label>
                            <input type="text" class="form-control" id="ccnumber" placeholder="" required>
                            <div class="invalid-feedback">
                                Credit card number is required
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3 mb-3">
                            <label class="text-light" for="cc-expiration">Expiration</label>
                            <input type="text" class="form-control" id="cc-expiration" placeholder="" required>
                            <div class="invalid-feedback">
                                Expiration date required
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label class="text-light" for="cc-cvv">CVV</label>
                            <input type="text" class="form-control" id="cc-cvv" placeholder="" required>
                            <div class="invalid-feedback">
                                Security code required
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div>
                            <button class="btn btn-primary btn-lg" onclick="verificarTarjeta()">Verificar Tarjeta</button>
                            <button class="btn btn-primary btn-lg" onclick="verificarTarjeta2()">Verificar Tarjeta2</button>
                        </div>
                    </div>

                </form>
            </div>
        </div>


    </div>



    <script>
        var firstname = document.getElementById('fname');
        var lname = document.getElementById('lname');
        var uname = document.getElementById('uname');
        var uemail = document.getElementById('uemail');
        var utelefono = document.getElementById('utelefono');
        var avatar = document.getElementById('avatar');


        function traer() {
            fetch('https://randomuser.me/api/')
                .then(res => res.json())
                .then(data => {

                    console.log(data.results['0'].email);
                    console.log("hola");
                    firstname.value = data.results['0'].name.first;
                    lname.value = data.results['0'].name.last;
                    uname.value = data.results['0'].login.username;
                    uemail.value = data.results['0'].email;
                    utelefono.value = data.results['0'].cell;
                    avatar.src = data.results['0'].picture.large;
                    avatar.style.property = "img-circle"



                })
        }

        function verificarTarjeta() {
            $(document).ready(function () {

              
                $(".container").submit(function () {

                    // Fetch JSON
                    $.getJSON("http://t2a.co/rest/?callback=?", {
                            "method": "validate_credit_card",
                            "api_key": "i3CRG7CIQ73YcmDW1BNTt62iAgWQYK5LDGajejIPH8_O", // better to use js_key obtained from javascript_key service for security reasons
                            "output": "json",
                            "card_number": $("#ccnumber").val(),
                            "mode": "test"
                        },
                       
                        function (result) {

                            
                            if (result.status == "ok") {

                                var html =
                                    "<p><strong>Your search returned the following dialling codes:</strong></p>";
                                $.each(result.area_code_list, function () {
                                    html += "<h2>" + this.code + "</h2><ul>";
                                    $.each(this.place_list, function () {
                                        html += "<li>" + this.name + "</li>";
                                    });
                                    html += "</ul>";
                                });
                                $("#results").html(html);

                            } else {
                                
                                alert("Error: " + result.error_code);
                            }

                        }
                    );

                    return false;
                });
            });
        }
        function verificarTarjeta2(parTarjeta=$("#ccnumber").val()) {
            var cadena = parTarjeta.toString();
            var longitud = cadena.length;
            var cifra = null;
            var cifra_cad = null;
            var suma = 0;
            for (var i = 0; i < longitud; i += 2) {
                cifra = parseInt(cadena.charAt(i)) * 2;
                if (cifra > 9) {
                    cifra_cad = cifra.toString();
                    cifra = parseInt(cifra_cad.charAt(0)) + parseInt(cifra_cad.charAt(1));
                }
                suma += cifra;
            }
            for (var i = 1; i < longitud; i += 2) {
                suma += parseInt(cadena.charAt(i));
            }
            if ((suma % 10) == 0) {
                alert("Número de tarjeta correcto");
            } else {
                alert("El número de tarjeta no es válido");
            }
        }

        function limpiar() {
            firstname.value = "";
            lname.value = "";
            uname.value = "";
            uemail.value = "";
            utelefono.value = "";
            avatar.src = "";

        }
    </script>
</body>

</html>